<div class="modal" id="profileModal" aria-hidden="true">
  <div class="modal-backdrop" id="profileBackdrop"></div>
  <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="profileTitle">
    <div class="modal-header">
      <h2 id="profileTitle">Combatant Profile</h2>
      <button type="button" class="icon-button" id="closeProfileButton" aria-label="Close profile">
        ✕
      </button>
    </div>
    <p class="helper-text">
      Edit stats, current HP, notes, and upload an avatar icon.
    </p>
    <div class="profile-card" id="profileCard">
      <div class="empty-profile" id="emptyProfile">
        Choose a combatant from the initiative order to view details.
      </div>
      <div class="profile-details" id="profileDetails" hidden>
        <div class="input-row">
          <label>
            Name
            <input type="text" id="profileName" />
          </label>
          <label>
            Type
            <select id="profileType">
              <option value="player">Player</option>
              <option value="npc">NPC</option>
            </select>
          </label>
        </div>
        <div class="input-row">
          <label>
            Current HP
            <input type="number" id="profileCurrentHp" min="0" />
          </label>
          <label>
            Max HP
            <input type="number" id="profileMaxHp" min="0" />
          </label>
          <label>
            Initiative
            <input type="number" id="profileInitiative" min="0" />
          </label>
        </div>
        <div class="hp-controls">
          <button type="button" data-hp-change="-1">-1 HP</button>
          <button type="button" data-hp-change="-5">-5 HP</button>
          <button type="button" data-hp-change="1">+1 HP</button>
          <button type="button" data-hp-change="5">+5 HP</button>
        </div>
        <label>
          Avatar
          <input type="file" id="profileAvatar" accept="image/*" />
        </label>
        <label>
          Conditions
          <input type="text" id="profileConditions" placeholder="e.g. Prone, Poisoned" />
        </label>
        <label>
          Notes
          <textarea id="profileNotes" rows="3" placeholder="Conditions, AC, spells, etc."></textarea>
        </label>
        <button class="danger" type="button" id="removeCombatantButton">Remove Combatant</button>
      </div>
    </div>
  </div>
</div>

<div class="modal" id="partyProfileModal" aria-hidden="true">
  <div class="modal-backdrop" id="partyProfileBackdrop"></div>
  <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="partyProfileTitle">
    <div class="modal-header">
      <h2 id="partyProfileTitle">Party Member</h2>
      <button type="button" class="icon-button" id="closePartyProfileButton" aria-label="Close party profile">
        ✕
      </button>
    </div>
    <p class="helper-text">Adjust party stats for the active world.</p>
    <div class="profile-card" id="partyProfileCard">
      <div class="empty-profile" id="emptyPartyProfile">
        Choose a party member from the navigation bar.
      </div>
      <div class="profile-details" id="partyProfileDetails" hidden>
        <label>
          Name
          <input type="text" id="partyProfileName" />
        </label>
        <div class="input-row">
          <label>
            Current HP
            <input type="number" id="partyProfileCurrentHp" min="0" />
          </label>
          <label>
            Max HP
            <input type="number" id="partyProfileMaxHp" min="0" />
          </label>
          <label>
            XP
            <input type="number" id="partyProfileXp" min="0" />
          </label>
          <label>
            Level
            <input type="number" id="partyProfileLevel" min="1" />
          </label>
        </div>
        <div class="condition-section">
          <div class="condition-header">
            <span>Death Saves</span>
          </div>
          <div class="input-row">
            <label class="death-save">
              <input type="checkbox" id="partyDeathSaveSuccess1" />
              Success 1
            </label>
            <label class="death-save">
              <input type="checkbox" id="partyDeathSaveSuccess2" />
              Success 2
            </label>
            <label class="death-save">
              <input type="checkbox" id="partyDeathSaveSuccess3" />
              Success 3
            </label>
          </div>
          <div class="input-row">
            <label class="death-save">
              <input type="checkbox" id="partyDeathSaveFail1" />
              Fail 1
            </label>
            <label class="death-save">
              <input type="checkbox" id="partyDeathSaveFail2" />
              Fail 2
            </label>
            <label class="death-save">
              <input type="checkbox" id="partyDeathSaveFail3" />
              Fail 3
            </label>
          </div>
          <button class="ghost" type="button" id="resetPartyDeathSavesButton">
            Reset Death Saves
          </button>
        </div>
        <div class="condition-section">
          <div class="condition-header">
            <span>Conditions</span>
            <button type="button" class="ghost condition-add" id="partyProfileConditionAdd">+</button>
          </div>
          <div class="condition-tags" id="partyProfileConditionTags"></div>
          <div class="condition-popover" id="partyProfileConditionPopover">
            <label>
              Choose a condition
              <select id="partyProfileConditionSelect">
                <option value="">Select</option>
                <option value="Blinded">Blinded</option>
                <option value="Charmed">Charmed</option>
                <option value="Deafened">Deafened</option>
                <option value="Exhaustion">Exhaustion</option>
                <option value="Frightened">Frightened</option>
                <option value="Grappled">Grappled</option>
                <option value="Incapacitated">Incapacitated</option>
                <option value="Invisible">Invisible</option>
                <option value="Paralyzed">Paralyzed</option>
                <option value="Petrified">Petrified</option>
                <option value="Poisoned">Poisoned</option>
                <option value="Prone">Prone</option>
                <option value="Restrained">Restrained</option>
                <option value="Stunned">Stunned</option>
                <option value="Unconscious">Unconscious</option>
              </select>
            </label>
            <label>
              Or type custom
              <input type="text" id="partyProfileConditionInput" placeholder="e.g. Burning" />
            </label>
            <div class="input-row">
              <label>
                Duration
                <input type="number" id="partyProfileConditionDuration" min="1" />
              </label>
              <label>
                Unit
                <select id="partyProfileConditionUnit">
                  <option value="">None</option>
                  <option value="rounds">Rounds</option>
                  <option value="hours">Hours</option>
                  <option value="days">Days</option>
                </select>
              </label>
              <label>
                Ruleset Tag
                <select id="partyProfileConditionRule">
                  <option value="">None</option>
                  <option value="Save ends">Save ends</option>
                  <option value="End of turn">End of turn</option>
                  <option value="Start of turn">Start of turn</option>
                  <option value="Short rest">Short rest</option>
                  <option value="Long rest">Long rest</option>
                  <option value="Until cured">Until cured</option>
                  <option value="Ongoing">Ongoing</option>
                </select>
              </label>
            </div>
            <button type="button" class="primary" id="partyProfileConditionConfirm">Add Condition</button>
          </div>
        </div>
        <label>
          Important Notes
          <textarea id="partyProfileNotes" rows="3" placeholder="Allies, goals, backstory notes, etc."></textarea>
        </label>
        <div class="input-row">
          <label>
            Copper
            <input type="number" id="partyProfileCopper" min="0" />
          </label>
          <label>
            Silver
            <input type="number" id="partyProfileSilver" min="0" />
          </label>
          <label>
            Gold
            <input type="number" id="partyProfileGold" min="0" />
          </label>
          <label>
            Platinum
            <input type="number" id="partyProfilePlatinum" min="0" />
          </label>
        </div>
        <button class="danger" type="button" id="removePartyMemberButton">Remove Party Member</button>
      </div>
    </div>
  </div>
</div>

<div class="modal" id="worldModal" aria-hidden="true">
  <div class="modal-backdrop" id="worldModalBackdrop"></div>
  <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="worldModalTitle">
    <div class="modal-header">
      <h2 id="worldModalTitle">Create World</h2>
      <button type="button" class="icon-button" id="closeWorldModalButton" aria-label="Close create world">
        ✕
      </button>
    </div>
    <p class="helper-text">Name your campaign world to get started.</p>
    <label>
      World Name
      <input type="text" id="worldNameInput" placeholder="e.g. Ember Coast" />
    </label>
    <p class="helper-text" id="worldModalError" role="alert"></p>
    <div class="button-row">
      <button type="button" class="ghost" id="cancelWorldButton">Cancel</button>
      <button type="button" class="primary" id="confirmWorldButton">Create World</button>
    </div>
  </div>
</div>

<div class="modal" id="worldEditModal" aria-hidden="true">
  <div class="modal-backdrop" id="worldEditBackdrop"></div>
  <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="worldEditTitle">
    <div class="modal-header">
      <h2 id="worldEditTitle">Edit World</h2>
      <button type="button" class="icon-button" id="closeWorldEditButton" aria-label="Close edit world">
        ✕
      </button>
    </div>
    <p class="helper-text">Update the world name or delete it entirely.</p>
    <label>
      World Name
      <input type="text" id="worldEditNameInput" placeholder="e.g. Ember Coast" />
    </label>
    <label>
      Cover Image
      <input type="file" id="worldCoverInput" accept="image/*" />
    </label>
    <div class="world-cover-preview" id="worldCoverPreview" aria-hidden="true"></div>
    <p class="helper-text" id="worldEditError" role="alert"></p>
    <div class="button-row">
      <button type="button" class="danger" id="deleteWorldButton">Delete World</button>
      <button type="button" class="ghost" id="cancelWorldEditButton">Cancel</button>
      <button type="button" class="primary" id="confirmWorldEditButton">Save</button>
    </div>
  </div>
</div>

<div class="modal" id="interactionModal" aria-hidden="true">
  <div class="modal-backdrop" id="interactionBackdrop"></div>
  <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="interactionTitle">
    <div class="modal-header">
      <h2 id="interactionTitle">Resolve Interaction</h2>
      <button type="button" class="icon-button" id="closeInteractionButton" aria-label="Close interaction">
        ✕
      </button>
    </div>
    <p class="helper-text" id="interactionSummary"></p>
    <label>
      Action
      <select id="interactionTypeInput">
        <option value="attack">Attack</option>
        <option value="heal">Heal</option>
        <option value="buff">Buff</option>
        <option value="assist">Assist</option>
      </select>
    </label>
    <label>
      Notes
      <textarea id="interactionNotesInput" rows="2" placeholder="Optional notes"></textarea>
    </label>
    <div class="button-row">
      <button type="button" class="ghost" id="cancelInteractionButton">Cancel</button>
      <button type="button" class="primary" id="confirmInteractionButton">Log Interaction</button>
    </div>
  </div>
</div>
